using GenericPipeline.Behaviors;

public record struct Request1 : IRequest;
public record struct Request2 : IRequest;
public record struct Request3 : IRequest;
public record struct Request4 : IRequest;
public record struct Request5 : IRequest;
public record struct Request6 : IRequest;
public record struct Request7 : IRequest;
public record struct Request8 : IRequest;
public record struct Request9 : IRequest;
public record struct Request10 : IRequest;
public record struct Request11 : IRequest;
public record struct Request12 : IRequest;
public record struct Request13 : IRequest;
public record struct Request14 : IRequest;
public record struct Request15 : IRequest;
public record struct Request16 : IRequest;
public record struct Request17 : IRequest;
public record struct Request18 : IRequest;
public record struct Request19 : IRequest;
public record struct Request20 : IRequest;
public record struct Request21 : IRequest;
public record struct Request22 : IRequest;
public record struct Request23 : IRequest;
public record struct Request24 : IRequest;
public record struct Request25 : IRequest;
public record struct Request26 : IRequest;
public record struct Request27 : IRequest;
public record struct Request28 : IRequest;
public record struct Request29 : IRequest;
public record struct Request30 : IRequest;
public record struct Request31 : IRequest;
public record struct Request32 : IRequest;
public record struct Request33 : IRequest;
public record struct Request34 : IRequest;
public record struct Request35 : IRequest;
public record struct Request36 : IRequest;
public record struct Request37 : IRequest;
public record struct Request38 : IRequest;
public record struct Request39 : IRequest;
public record struct Request40 : IRequest;
public record struct Request41 : IRequest;
public record struct Request42 : IRequest;
public record struct Request43 : IRequest;
public record struct Request44 : IRequest;
public record struct Request45 : IRequest;
public record struct Request46 : IRequest;
public record struct Request47 : IRequest;
public record struct Request48 : IRequest;
public record struct Request49 : IRequest;
public record struct Request50 : IRequest;
public record struct Request51 : IRequest;
public record struct Request52 : IRequest;
public record struct Request53 : IRequest;
public record struct Request54 : IRequest;
public record struct Request55 : IRequest;
public record struct Request56 : IRequest;
public record struct Request57 : IRequest;
public record struct Request58 : IRequest;
public record struct Request59 : IRequest;
public record struct Request60 : IRequest;
public record struct Request61 : IRequest;
public record struct Request62 : IRequest;
public record struct Request63 : IRequest;
public record struct Request64 : IRequest;
public record struct Request65 : IRequest;
public record struct Request66 : IRequest;
public record struct Request67 : IRequest;
public record struct Request68 : IRequest;
public record struct Request69 : IRequest;
public record struct Request70 : IRequest;
public record struct Request71 : IRequest;
public record struct Request72 : IRequest;
public record struct Request73 : IRequest;
public record struct Request74 : IRequest;
public record struct Request75 : IRequest;
public record struct Request76 : IRequest;
public record struct Request77 : IRequest;
public record struct Request78 : IRequest;
public record struct Request79 : IRequest;
public record struct Request80 : IRequest;
public record struct Request81 : IRequest;
public record struct Request82 : IRequest;
public record struct Request83 : IRequest;
public record struct Request84 : IRequest;
public record struct Request85 : IRequest;
public record struct Request86 : IRequest;
public record struct Request87 : IRequest;
public record struct Request88 : IRequest;
public record struct Request89 : IRequest;
public record struct Request90 : IRequest;
public record struct Request91 : IRequest;
public record struct Request92 : IRequest;
public record struct Request93 : IRequest;
public record struct Request94 : IRequest;
public record struct Request95 : IRequest;
public record struct Request96 : IRequest;
public record struct Request97 : IRequest;
public record struct Request98 : IRequest;
public record struct Request99 : IRequest;
public record struct Request100 : IRequest;

public class Request1Handler : IRequestHandler<Request1> { public Unit Handle(Request1 request) => Unit.Value; }
public class Request2Handler : IRequestHandler<Request2> { public Unit Handle(Request2 request) => Unit.Value; }
public class Request3Handler : IRequestHandler<Request3> { public Unit Handle(Request3 request) => Unit.Value; }
public class Request4Handler : IRequestHandler<Request4> { public Unit Handle(Request4 request) => Unit.Value; }
public class Request5Handler : IRequestHandler<Request5> { public Unit Handle(Request5 request) => Unit.Value; }
public class Request6Handler : IRequestHandler<Request6> { public Unit Handle(Request6 request) => Unit.Value; }
public class Request7Handler : IRequestHandler<Request7> { public Unit Handle(Request7 request) => Unit.Value; }
public class Request8Handler : IRequestHandler<Request8> { public Unit Handle(Request8 request) => Unit.Value; }
public class Request9Handler : IRequestHandler<Request9> { public Unit Handle(Request9 request) => Unit.Value; }
public class Request10Handler : IRequestHandler<Request10> { public Unit Handle(Request10 request) => Unit.Value; }
public class Request11Handler : IRequestHandler<Request11> { public Unit Handle(Request11 request) => Unit.Value; }
public class Request12Handler : IRequestHandler<Request12> { public Unit Handle(Request12 request) => Unit.Value; }
public class Request13Handler : IRequestHandler<Request13> { public Unit Handle(Request13 request) => Unit.Value; }
public class Request14Handler : IRequestHandler<Request14> { public Unit Handle(Request14 request) => Unit.Value; }
public class Request15Handler : IRequestHandler<Request15> { public Unit Handle(Request15 request) => Unit.Value; }
public class Request16Handler : IRequestHandler<Request16> { public Unit Handle(Request16 request) => Unit.Value; }
public class Request17Handler : IRequestHandler<Request17> { public Unit Handle(Request17 request) => Unit.Value; }
public class Request18Handler : IRequestHandler<Request18> { public Unit Handle(Request18 request) => Unit.Value; }
public class Request19Handler : IRequestHandler<Request19> { public Unit Handle(Request19 request) => Unit.Value; }
public class Request20Handler : IRequestHandler<Request20> { public Unit Handle(Request20 request) => Unit.Value; }
public class Request21Handler : IRequestHandler<Request21> { public Unit Handle(Request21 request) => Unit.Value; }
public class Request22Handler : IRequestHandler<Request22> { public Unit Handle(Request22 request) => Unit.Value; }
public class Request23Handler : IRequestHandler<Request23> { public Unit Handle(Request23 request) => Unit.Value; }
public class Request24Handler : IRequestHandler<Request24> { public Unit Handle(Request24 request) => Unit.Value; }
public class Request25Handler : IRequestHandler<Request25> { public Unit Handle(Request25 request) => Unit.Value; }
public class Request26Handler : IRequestHandler<Request26> { public Unit Handle(Request26 request) => Unit.Value; }
public class Request27Handler : IRequestHandler<Request27> { public Unit Handle(Request27 request) => Unit.Value; }
public class Request28Handler : IRequestHandler<Request28> { public Unit Handle(Request28 request) => Unit.Value; }
public class Request29Handler : IRequestHandler<Request29> { public Unit Handle(Request29 request) => Unit.Value; }
public class Request30Handler : IRequestHandler<Request30> { public Unit Handle(Request30 request) => Unit.Value; }
public class Request31Handler : IRequestHandler<Request31> { public Unit Handle(Request31 request) => Unit.Value; }
public class Request32Handler : IRequestHandler<Request32> { public Unit Handle(Request32 request) => Unit.Value; }
public class Request33Handler : IRequestHandler<Request33> { public Unit Handle(Request33 request) => Unit.Value; }
public class Request34Handler : IRequestHandler<Request34> { public Unit Handle(Request34 request) => Unit.Value; }
public class Request35Handler : IRequestHandler<Request35> { public Unit Handle(Request35 request) => Unit.Value; }
public class Request36Handler : IRequestHandler<Request36> { public Unit Handle(Request36 request) => Unit.Value; }
public class Request37Handler : IRequestHandler<Request37> { public Unit Handle(Request37 request) => Unit.Value; }
public class Request38Handler : IRequestHandler<Request38> { public Unit Handle(Request38 request) => Unit.Value; }
public class Request39Handler : IRequestHandler<Request39> { public Unit Handle(Request39 request) => Unit.Value; }
public class Request40Handler : IRequestHandler<Request40> { public Unit Handle(Request40 request) => Unit.Value; }
public class Request41Handler : IRequestHandler<Request41> { public Unit Handle(Request41 request) => Unit.Value; }
public class Request42Handler : IRequestHandler<Request42> { public Unit Handle(Request42 request) => Unit.Value; }
public class Request43Handler : IRequestHandler<Request43> { public Unit Handle(Request43 request) => Unit.Value; }
public class Request44Handler : IRequestHandler<Request44> { public Unit Handle(Request44 request) => Unit.Value; }
public class Request45Handler : IRequestHandler<Request45> { public Unit Handle(Request45 request) => Unit.Value; }
public class Request46Handler : IRequestHandler<Request46> { public Unit Handle(Request46 request) => Unit.Value; }
public class Request47Handler : IRequestHandler<Request47> { public Unit Handle(Request47 request) => Unit.Value; }
public class Request48Handler : IRequestHandler<Request48> { public Unit Handle(Request48 request) => Unit.Value; }
public class Request49Handler : IRequestHandler<Request49> { public Unit Handle(Request49 request) => Unit.Value; }
public class Request50Handler : IRequestHandler<Request50> { public Unit Handle(Request50 request) => Unit.Value; }
public class Request51Handler : IRequestHandler<Request51> { public Unit Handle(Request51 request) => Unit.Value; }
public class Request52Handler : IRequestHandler<Request52> { public Unit Handle(Request52 request) => Unit.Value; }
public class Request53Handler : IRequestHandler<Request53> { public Unit Handle(Request53 request) => Unit.Value; }
public class Request54Handler : IRequestHandler<Request54> { public Unit Handle(Request54 request) => Unit.Value; }
public class Request55Handler : IRequestHandler<Request55> { public Unit Handle(Request55 request) => Unit.Value; }
public class Request56Handler : IRequestHandler<Request56> { public Unit Handle(Request56 request) => Unit.Value; }
public class Request57Handler : IRequestHandler<Request57> { public Unit Handle(Request57 request) => Unit.Value; }
public class Request58Handler : IRequestHandler<Request58> { public Unit Handle(Request58 request) => Unit.Value; }
public class Request59Handler : IRequestHandler<Request59> { public Unit Handle(Request59 request) => Unit.Value; }
public class Request60Handler : IRequestHandler<Request60> { public Unit Handle(Request60 request) => Unit.Value; }
public class Request61Handler : IRequestHandler<Request61> { public Unit Handle(Request61 request) => Unit.Value; }
public class Request62Handler : IRequestHandler<Request62> { public Unit Handle(Request62 request) => Unit.Value; }
public class Request63Handler : IRequestHandler<Request63> { public Unit Handle(Request63 request) => Unit.Value; }
public class Request64Handler : IRequestHandler<Request64> { public Unit Handle(Request64 request) => Unit.Value; }
public class Request65Handler : IRequestHandler<Request65> { public Unit Handle(Request65 request) => Unit.Value; }
public class Request66Handler : IRequestHandler<Request66> { public Unit Handle(Request66 request) => Unit.Value; }
public class Request67Handler : IRequestHandler<Request67> { public Unit Handle(Request67 request) => Unit.Value; }
public class Request68Handler : IRequestHandler<Request68> { public Unit Handle(Request68 request) => Unit.Value; }
public class Request69Handler : IRequestHandler<Request69> { public Unit Handle(Request69 request) => Unit.Value; }
public class Request70Handler : IRequestHandler<Request70> { public Unit Handle(Request70 request) => Unit.Value; }
public class Request71Handler : IRequestHandler<Request71> { public Unit Handle(Request71 request) => Unit.Value; }
public class Request72Handler : IRequestHandler<Request72> { public Unit Handle(Request72 request) => Unit.Value; }
public class Request73Handler : IRequestHandler<Request73> { public Unit Handle(Request73 request) => Unit.Value; }
public class Request74Handler : IRequestHandler<Request74> { public Unit Handle(Request74 request) => Unit.Value; }
public class Request75Handler : IRequestHandler<Request75> { public Unit Handle(Request75 request) => Unit.Value; }
public class Request76Handler : IRequestHandler<Request76> { public Unit Handle(Request76 request) => Unit.Value; }
public class Request77Handler : IRequestHandler<Request77> { public Unit Handle(Request77 request) => Unit.Value; }
public class Request78Handler : IRequestHandler<Request78> { public Unit Handle(Request78 request) => Unit.Value; }
public class Request79Handler : IRequestHandler<Request79> { public Unit Handle(Request79 request) => Unit.Value; }
public class Request80Handler : IRequestHandler<Request80> { public Unit Handle(Request80 request) => Unit.Value; }
public class Request81Handler : IRequestHandler<Request81> { public Unit Handle(Request81 request) => Unit.Value; }
public class Request82Handler : IRequestHandler<Request82> { public Unit Handle(Request82 request) => Unit.Value; }
public class Request83Handler : IRequestHandler<Request83> { public Unit Handle(Request83 request) => Unit.Value; }
public class Request84Handler : IRequestHandler<Request84> { public Unit Handle(Request84 request) => Unit.Value; }
public class Request85Handler : IRequestHandler<Request85> { public Unit Handle(Request85 request) => Unit.Value; }
public class Request86Handler : IRequestHandler<Request86> { public Unit Handle(Request86 request) => Unit.Value; }
public class Request87Handler : IRequestHandler<Request87> { public Unit Handle(Request87 request) => Unit.Value; }
public class Request88Handler : IRequestHandler<Request88> { public Unit Handle(Request88 request) => Unit.Value; }
public class Request89Handler : IRequestHandler<Request89> { public Unit Handle(Request89 request) => Unit.Value; }
public class Request90Handler : IRequestHandler<Request90> { public Unit Handle(Request90 request) => Unit.Value; }
public class Request91Handler : IRequestHandler<Request91> { public Unit Handle(Request91 request) => Unit.Value; }
public class Request92Handler : IRequestHandler<Request92> { public Unit Handle(Request92 request) => Unit.Value; }
public class Request93Handler : IRequestHandler<Request93> { public Unit Handle(Request93 request) => Unit.Value; }
public class Request94Handler : IRequestHandler<Request94> { public Unit Handle(Request94 request) => Unit.Value; }
public class Request95Handler : IRequestHandler<Request95> { public Unit Handle(Request95 request) => Unit.Value; }
public class Request96Handler : IRequestHandler<Request96> { public Unit Handle(Request96 request) => Unit.Value; }
public class Request97Handler : IRequestHandler<Request97> { public Unit Handle(Request97 request) => Unit.Value; }
public class Request98Handler : IRequestHandler<Request98> { public Unit Handle(Request98 request) => Unit.Value; }
public class Request99Handler : IRequestHandler<Request99> { public Unit Handle(Request99 request) => Unit.Value; }
public class Request100Handler : IRequestHandler<Request100> { public Unit Handle(Request100 request) => Unit.Value; }

[SimpleJob(RuntimeMoniker.Net60)]
[MemoryDiagnoser]
public class CompareHandlerCounts
{
    private Pipeline _1HandlerPipeline;
    private Pipeline _10HandlersPipeline;
    private Pipeline _100HandlersPipeline;

    [GlobalSetup]
    public void Setup()
    {
        _1HandlerPipeline = new Pipeline()
            .AppendHandler<Request1Handler>();

        var behavior = new MediatorBehavior();
        for (var i = 1; i <= 10; ++i)
        {
            behavior.AddHandler(Activator.CreateInstance(Type.GetType($"Request{i}Handler")));
        }
        _10HandlersPipeline = new Pipeline()
            .AppendBehavior<MediatorBehavior>(behavior);

        behavior = new MediatorBehavior();
        for (var i = 1; i <= 100; ++i)
        {
            behavior.AddHandler(Activator.CreateInstance(Type.GetType($"Request{i}Handler")));
        }
        _100HandlersPipeline = new Pipeline()
            .AppendBehavior<MediatorBehavior>(behavior);
    }

    [Benchmark(Baseline = true)]
    public void Handler_1()
    {
        _1HandlerPipeline.Send<Request1>(new());
    }

    [Benchmark()]
    public void Handler_10()
    {
        _10HandlersPipeline.Send<Request10>(new());
    }

    [Benchmark()]
    public void Handler_100()
    {
        _100HandlersPipeline.Send<Request100>(new());
    }
}

